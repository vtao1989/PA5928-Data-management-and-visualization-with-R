<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Data Visualization with ggplot2 | PA 5928 Data Management &amp; Visualization with R (Updating)</title>
  <meta name="description" content="This is the website for couse PA 5928 in the University of Minnesota" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Data Visualization with ggplot2 | PA 5928 Data Management &amp; Visualization with R (Updating)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the website for couse PA 5928 in the University of Minnesota" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Data Visualization with ggplot2 | PA 5928 Data Management &amp; Visualization with R (Updating)" />
  
  <meta name="twitter:description" content="This is the website for couse PA 5928 in the University of Minnesota" />
  

<meta name="author" content="Tao Tao (University of Minnesota)" />


<meta name="date" content="2019-11-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-visualization-with-base-functions.html"/>
<link rel="next" href="miscellaneous.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PA 5928 Data Management & Visualization with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Course Syllabus</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i><b>1.1</b> Course Description</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#course-prerequisites"><i class="fa fa-check"></i><b>1.2</b> Course Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#logistics"><i class="fa fa-check"></i><b>1.3</b> Logistics</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-learning-outcomes"><i class="fa fa-check"></i><b>1.4</b> Course Learning Outcomes</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#in-class-exercise-and-final-project"><i class="fa fa-check"></i><b>1.5</b> In-class exercise and final project</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#course-schedule-tentative"><i class="fa fa-check"></i><b>1.6</b> Course Schedule (Tentative)</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#homework-and-projects-collaboration-and-submission-policy"><i class="fa fa-check"></i><b>1.7</b> Homework and projects collaboration and submission policy</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#some-results-from-the-online-survey"><i class="fa fa-check"></i><b>1.8</b> Some results from the online survey</a><ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#question-1"><i class="fa fa-check"></i><b>1.8.1</b> Question 1</a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#question-2"><i class="fa fa-check"></i><b>1.8.2</b> Question 2</a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="index.html#question-3"><i class="fa fa-check"></i><b>1.8.3</b> Question 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction to RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#what-is-r"><i class="fa fa-check"></i><b>2.1</b> What is R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#what-is-rstudio"><i class="fa fa-check"></i><b>2.2</b> What is RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#install-r-rstudio"><i class="fa fa-check"></i><b>2.3</b> Install R + RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#familiar-with-the-user-interface-of-rstudio"><i class="fa fa-check"></i><b>2.4</b> Familiar with the user interface of RStudio</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#create-and-save-r-file"><i class="fa fa-check"></i><b>2.5</b> Create and save R file</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#print-hello-world"><i class="fa fa-check"></i><b>2.6</b> Print Hello, world</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#install-and-use-r-packages"><i class="fa fa-check"></i><b>2.7</b> Install and use R Packages</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#make-notes"><i class="fa fa-check"></i><b>2.8</b> Make notes</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html#tips"><i class="fa fa-check"></i><b>2.9</b> Tips</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>3</b> Introduction to R</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#variable-types"><i class="fa fa-check"></i><b>3.1</b> Variable types</a></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#operations"><i class="fa fa-check"></i><b>3.2</b> Operations</a><ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#assignment-operations"><i class="fa fa-check"></i><b>3.2.1</b> Assignment operations</a></li>
<li class="chapter" data-level="3.2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic-operations"><i class="fa fa-check"></i><b>3.2.2</b> Arithmetic operations</a></li>
<li class="chapter" data-level="3.2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#relational-operations"><i class="fa fa-check"></i><b>3.2.3</b> Relational operations</a></li>
<li class="chapter" data-level="3.2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#logical-operations"><i class="fa fa-check"></i><b>3.2.4</b> Logical operations</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-structures"><i class="fa fa-check"></i><b>3.3</b> Data structures</a></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#conditional-statements"><i class="fa fa-check"></i><b>3.4</b> Conditional statements</a></li>
<li class="chapter" data-level="3.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loops"><i class="fa fa-check"></i><b>3.5</b> Loops</a></li>
<li class="chapter" data-level="3.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions"><i class="fa fa-check"></i><b>3.6</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation with Base Functions</a><ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#import-and-save-datasets"><i class="fa fa-check"></i><b>4.1</b> Import and save datasets</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#import-data"><i class="fa fa-check"></i><b>4.1.1</b> Import data</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#save-file"><i class="fa fa-check"></i><b>4.1.2</b> Save file</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#file-location"><i class="fa fa-check"></i><b>4.1.3</b> File location</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#view-data"><i class="fa fa-check"></i><b>4.2</b> View data</a></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#data-selection"><i class="fa fa-check"></i><b>4.3</b> Data selection</a></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#conditional-selection"><i class="fa fa-check"></i><b>4.4</b> Conditional selection</a></li>
<li class="chapter" data-level="4.5" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#deal-with-missing-values"><i class="fa fa-check"></i><b>4.5</b> Deal with missing values</a></li>
<li class="chapter" data-level="4.6" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#subset"><i class="fa fa-check"></i><b>4.6</b> Subset</a></li>
<li class="chapter" data-level="4.7" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#merge-two-datasets"><i class="fa fa-check"></i><b>4.7</b> Merge two datasets</a></li>
<li class="chapter" data-level="4.8" data-path="data-manipulation-with-base-functions.html"><a href="data-manipulation-with-base-functions.html#column-operation"><i class="fa fa-check"></i><b>4.8</b> Column operation</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html"><i class="fa fa-check"></i><b>5</b> Data Manipulation with dplyr</a><ul>
<li class="chapter" data-level="5.1" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#select"><i class="fa fa-check"></i><b>5.1</b> select()</a></li>
<li class="chapter" data-level="5.2" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#filter"><i class="fa fa-check"></i><b>5.2</b> filter()</a></li>
<li class="chapter" data-level="5.3" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#arrange"><i class="fa fa-check"></i><b>5.3</b> arrange()</a></li>
<li class="chapter" data-level="5.4" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#mutate"><i class="fa fa-check"></i><b>5.4</b> mutate()</a></li>
<li class="chapter" data-level="5.5" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#group_by-and-summarise"><i class="fa fa-check"></i><b>5.5</b> group_by() and summarise()</a></li>
<li class="chapter" data-level="5.6" data-path="data-manipulation-with-dplyr.html"><a href="data-manipulation-with-dplyr.html#join"><i class="fa fa-check"></i><b>5.6</b> join()</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html"><i class="fa fa-check"></i><b>6</b> Data Visualization with Base Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html#scatter-plot"><i class="fa fa-check"></i><b>6.1</b> Scatter plot</a></li>
<li class="chapter" data-level="6.2" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html#line-plot"><i class="fa fa-check"></i><b>6.2</b> Line plot</a></li>
<li class="chapter" data-level="6.3" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html#bar-plot"><i class="fa fa-check"></i><b>6.3</b> Bar plot</a></li>
<li class="chapter" data-level="6.4" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html#add-more-elements-in-the-plots"><i class="fa fa-check"></i><b>6.4</b> Add more elements in the plots</a></li>
<li class="chapter" data-level="6.5" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html#pie-chart"><i class="fa fa-check"></i><b>6.5</b> Pie chart</a></li>
<li class="chapter" data-level="6.6" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html#boxplot"><i class="fa fa-check"></i><b>6.6</b> Boxplot</a></li>
<li class="chapter" data-level="6.7" data-path="data-visualization-with-base-functions.html"><a href="data-visualization-with-base-functions.html#color-in-r"><i class="fa fa-check"></i><b>6.7</b> Color in R</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Data Visualization with ggplot2</a><ul>
<li class="chapter" data-level="7.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#grammer-of-graphics-gg"><i class="fa fa-check"></i><b>7.1</b> Grammer of Graphics (gg)</a></li>
<li class="chapter" data-level="7.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#data-aesthetics-and-geometries"><i class="fa fa-check"></i><b>7.2</b> Data, Aesthetics, and Geometries</a><ul>
<li class="chapter" data-level="7.2.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#scatter-plot-1"><i class="fa fa-check"></i><b>7.2.1</b> Scatter plot</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#bar-plot-1"><i class="fa fa-check"></i><b>7.2.2</b> Bar plot</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#line-plot-1"><i class="fa fa-check"></i><b>7.2.3</b> Line plot</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#boxplot-1"><i class="fa fa-check"></i><b>7.2.4</b> Boxplot</a></li>
<li class="chapter" data-level="7.2.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#pie-chart-1"><i class="fa fa-check"></i><b>7.2.5</b> Pie chart</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#facets"><i class="fa fa-check"></i><b>7.3</b> Facets</a></li>
<li class="chapter" data-level="7.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#statistics"><i class="fa fa-check"></i><b>7.4</b> Statistics</a></li>
<li class="chapter" data-level="7.5" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>7.5</b> Coordinates</a><ul>
<li class="chapter" data-level="7.5.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#zooming-in-and-out"><i class="fa fa-check"></i><b>7.5.1</b> Zooming in and out</a></li>
<li class="chapter" data-level="7.5.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#ratio"><i class="fa fa-check"></i><b>7.5.2</b> Ratio</a></li>
<li class="chapter" data-level="7.5.3" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#swaping-the-axes"><i class="fa fa-check"></i><b>7.5.3</b> Swaping the axes</a></li>
<li class="chapter" data-level="7.5.4" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#polar-coordinate-system"><i class="fa fa-check"></i><b>7.5.4</b> Polar coordinate system</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#themes-updating"><i class="fa fa-check"></i><b>7.6</b> Themes (Updating)</a><ul>
<li class="chapter" data-level="7.6.1" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#add-labels"><i class="fa fa-check"></i><b>7.6.1</b> Add labels</a></li>
<li class="chapter" data-level="7.6.2" data-path="data-visualization-with-ggplot2.html"><a href="data-visualization-with-ggplot2.html#change-ticks"><i class="fa fa-check"></i><b>7.6.2</b> Change ticks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="miscellaneous.html"><a href="miscellaneous.html"><i class="fa fa-check"></i><b>8</b> Miscellaneous</a><ul>
<li class="chapter" data-level="8.1" data-path="miscellaneous.html"><a href="miscellaneous.html#something-related-to-in-class-exercises-and-grading-rubic"><i class="fa fa-check"></i><b>8.1</b> Something related to in-class exercises and grading rubic</a></li>
<li class="chapter" data-level="8.2" data-path="miscellaneous.html"><a href="miscellaneous.html#comparison-between-r-and-stata"><i class="fa fa-check"></i><b>8.2</b> Comparison between R and Stata</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="final-project.html"><a href="final-project.html"><i class="fa fa-check"></i><b>9</b> Final Project</a><ul>
<li class="chapter" data-level="9.1" data-path="final-project.html"><a href="final-project.html#description"><i class="fa fa-check"></i><b>9.1</b> Description</a></li>
<li class="chapter" data-level="9.2" data-path="final-project.html"><a href="final-project.html#timeline"><i class="fa fa-check"></i><b>9.2</b> Timeline</a></li>
<li class="chapter" data-level="9.3" data-path="final-project.html"><a href="final-project.html#proposal"><i class="fa fa-check"></i><b>9.3</b> Proposal</a></li>
<li class="chapter" data-level="9.4" data-path="final-project.html"><a href="final-project.html#data-analysis"><i class="fa fa-check"></i><b>9.4</b> Data analysis</a></li>
<li class="chapter" data-level="9.5" data-path="final-project.html"><a href="final-project.html#final-report"><i class="fa fa-check"></i><b>9.5</b> Final report</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>10</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PA 5928 Data Management &amp; Visualization with R (Updating)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-visualization-with-ggplot2" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Data Visualization with ggplot2</h1>
<div id="grammer-of-graphics-gg" class="section level2">
<h2><span class="header-section-number">7.1</span> Grammer of Graphics (gg)</h2>
<p>We have grammar for languages. We also have grammars for graphcis. That’s where <code>gg</code> of <code>ggplot2</code> comes from. For <code>ggplot2</code>, it has seven grammatical elements listed in the table below <span class="citation">(DataCamp <a href="#ref-datacamp1">2019</a>)</span>.</p>
<table>
<thead>
<tr class="header">
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data</td>
<td>The dataset being plotted.</td>
</tr>
<tr class="even">
<td>Aesthetics</td>
<td>The scales onto which we map our data.</td>
</tr>
<tr class="odd">
<td>Geometries</td>
<td>The visual elements used for our data.</td>
</tr>
<tr class="even">
<td>Facets</td>
<td>Plotting small multiples.</td>
</tr>
<tr class="odd">
<td>Statistics</td>
<td>Representations of our data to aid understanding.</td>
</tr>
<tr class="even">
<td>Coordinates</td>
<td>The space on which the data will be plotted.</td>
</tr>
<tr class="odd">
<td>Themes</td>
<td>All non-dataink.</td>
</tr>
</tbody>
</table>
<p>Let’s take the codes below as a simple example to show how those different elements work in ggplots. From this example, we might have a general idea what is each element and how does it work. If you are still confused, don’t worry about it. We will talk about each element in details later.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" title="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb266-2" title="2"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb266-3" title="3"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb266-4" title="4">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb266-5" title="5"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Geometries</span></a>
<a class="sourceLine" id="cb266-6" title="6"><span class="st">  </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>gear) <span class="op">+</span><span class="st"> </span><span class="co"># Facets</span></a>
<a class="sourceLine" id="cb266-7" title="7"><span class="st">  </span><span class="kw">stat_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="co"># Statistics</span></a>
<a class="sourceLine" id="cb266-8" title="8"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="st">&#39;Miles/(US) gallon&#39;</span>,</a>
<a class="sourceLine" id="cb266-9" title="9">                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">40</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb266-10" title="10"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="st">&#39;Weight (1000 lbs)&#39;</span>,</a>
<a class="sourceLine" id="cb266-11" title="11">                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">7</span>)) <span class="op">+</span><span class="st"> </span><span class="co"># Coordinates</span></a>
<a class="sourceLine" id="cb266-12" title="12"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="co"># Themes</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-118-1.png" width="672" /></p>
</div>
<div id="data-aesthetics-and-geometries" class="section level2">
<h2><span class="header-section-number">7.2</span> Data, Aesthetics, and Geometries</h2>
<p>Generally, if you want to draw figures with <code>ggplot2</code>, you need at least three elements, which are data, aesthetics, and geometries. Data is the dataset we want to visualize. Aesthetic specifies the variables and related attributes. GEometry indicates the plot type and related attributes. Take the example above again. We want to visualize the varialbes of <code>mpg</code> and <code>wp</code> (aesthetic) of the dataset <code>mtcars</code> (data) with a scatter plot (geometry).</p>
<p>Similar to <code>dplyr</code>, <code>ggplot2</code> also has its own fashion of coding. We start with the <code>ggplot()</code> function. Please pay attention that there is no <code>2</code> in the name of the function. In the function, we first indicate the name of the dataset or data frame. Then we use <code>aes()</code> to indicate the scales we want to map our data. Here, we map <code>mpg</code> to x axis, and <code>wt</code> to y axis. Then we use a plus sign <code>+</code> to connect it to other functions. We are going to draw a scatter plot, we use <code>geom_point()</code>.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb267-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb267-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="co"># Geometries</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-119-1.png" width="672" /></p>
<p>Well, we could see the result and it is following our codes. Based on this plot, we have a overall idea of the relationship between <code>wt</code> and <code>mpg</code>, which is <code>wt</code> has a negative relationship with <code>mpg</code>. This result makes sense to us. If a car is lighter and it could drive farther with the same amount of gasoline. (Please remember that this relationship is just correlation, not causality.)</p>
<p>We could add attributes in the aesthetic element. For example, we could use color to indicate the value of <code>hp</code> by adding <code>col = hp</code>.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb268-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt, <span class="dt">col =</span> hp)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb268-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="co"># Geometries</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-120-1.png" width="672" /></p>
<p>Now we have more information in the result. While the weight is heavier, the hourse power is stronger.</p>
<p>Here, <code>hp</code> is a continous variable, so <code>ggplot2</code> uses the darkness of the color to indicate the value. However, if we use a categorical varibable (e.g. binomial variable), <code>ggplot2</code> will use different colors to show different types.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb269-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb269-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt, <span class="dt">col =</span> <span class="kw">factor</span>(am))) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb269-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="co"># Geometries</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-121-1.png" width="672" /></p>
<p>Here, <code>am</code> stands for the types of transmission system (0 = automatic, 1 = manual). We use <code>factor()</code> to transfer this variable to a categorical one. Then, the <code>ggplot2</code> uses one color for automatic transmission and another color for mannual transmission.</p>
<p>Besides <code>color</code>, there are several other parameters to show different aspects of the plots.</p>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Continuous variable</th>
<th>Categorical variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x</td>
<td>X axis position</td>
<td>✓</td>
<td></td>
</tr>
<tr class="even">
<td>y</td>
<td>y axis position</td>
<td>✓</td>
<td></td>
</tr>
<tr class="odd">
<td>size</td>
<td>Diameter of points, thickness of lines</td>
<td>✓</td>
<td></td>
</tr>
<tr class="even">
<td>alpha</td>
<td>Transparency</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>color</td>
<td>Color of dots, outlines of other shapes</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="even">
<td>fill</td>
<td>Fill colour</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr class="odd">
<td>labels</td>
<td>Text on a plot or axes</td>
<td></td>
<td>✓</td>
</tr>
<tr class="even">
<td>shape</td>
<td>Shape of point</td>
<td></td>
<td>✓</td>
</tr>
<tr class="odd">
<td>linetype</td>
<td>Line dash pa!ern</td>
<td></td>
<td>✓</td>
</tr>
</tbody>
</table>
<p>As for geometries, there are many different types ot them you can use for different plots. For examples, <code>geom_point()</code> for scatter plot, <code>geom_bar</code> for bar plot, <code>geom_boxplot</code> for boxplot, etc. Most functions of geometries are self-explained, so you could tell what their usages easily. We all talk about those commonly used geometries such as sactter plot, bar plot, line plot, etc. in the following parts.</p>
<div id="scatter-plot-1" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Scatter plot</h3>
<p>We use <code>geom_point()</code> to plot scatter plot in R with <code>ggplot2</code>. In the example below, we map <code>mpg</code> to x axis, and <code>wt</code> to y axis. We indicate the transparency by set <code>alpha = hp</code>. The transparency of each point is decided by its value of <code>hp</code>.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb270-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt, <span class="dt">alpha =</span> hp)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb270-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="co"># Geometries</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-122-1.png" width="672" /></p>
</div>
<div id="bar-plot-1" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Bar plot</h3>
<p>In the example below, we draw a bar plot to show the number of cars with different tansmission systems. In <code>aes()</code>, we only indicate the variable <code>am</code>. R then will count the number for each transimission type. We use <code>geom_bar()</code> to plot it.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb271-2" title="2">       <span class="kw">aes</span>(am)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb271-3" title="3"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="co"># Geometries</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-123-1.png" width="672" /></p>
<p>Go back to our previous example, which is different from the example above.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb272-1" title="1">year &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1998</span><span class="op">:</span><span class="dv">2003</span>) <span class="co"># create variable year</span></a>
<a class="sourceLine" id="cb272-2" title="2">sales &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">500</span>, <span class="dv">600</span>, <span class="dv">650</span>, <span class="dv">700</span>, <span class="dv">400</span>, <span class="dv">550</span>) <span class="co"># create variable sales</span></a>
<a class="sourceLine" id="cb272-3" title="3">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(year, sales) <span class="co"># combine the variables into one data frame called df</span></a>
<a class="sourceLine" id="cb272-4" title="4"></a>
<a class="sourceLine" id="cb272-5" title="5"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> sales)) <span class="op">+</span></a>
<a class="sourceLine" id="cb272-6" title="6"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>) <span class="co"># you need to specify stat = &#39;identity&#39; to plot the actual value</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-124-1.png" width="672" /></p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" title="1">                              <span class="co"># for each year, not count</span></a></code></pre></div>
</div>
<div id="line-plot-1" class="section level3">
<h3><span class="header-section-number">7.2.3</span> Line plot</h3>
<p>To show the usage of line plot in <code>ggplot2</code>, we use a new dataset <code>economics</code> coming from the <code>ggplot2</code> package. This dataset was produced from US economic time series data. Use <code>help()</code> to check more information of this dataset.</p>
<p>In this example, we use <code>geom_line()</code>.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" title="1"><span class="kw">data</span>(economics)</a>
<a class="sourceLine" id="cb274-2" title="2"><span class="kw">ggplot</span>(economics,</a>
<a class="sourceLine" id="cb274-3" title="3">       <span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> unemploy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb274-4" title="4"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">col =</span> <span class="st">&#39;Blue&#39;</span>) <span class="co"># indicate the color of the line by setting col = &#39;Blue&#39;</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>
<p>In this plot, it shows clearly the temperol trend of the number of unemployed in the US. There two increase recently starting from 2001 and 2008.</p>
</div>
<div id="boxplot-1" class="section level3">
<h3><span class="header-section-number">7.2.4</span> Boxplot</h3>
<p>In the example below, we draw a boxplot for each transmission type. To do this, we map <code>am</code> to the x axis, and <code>mpg</code> to the y axis. We use <code>factor()</code> or <code>as.factor()</code> to transfer <code>am</code> to a factor (or categorical variable).</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" title="1"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb275-2" title="2"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.factor</span>(am), <span class="dt">y =</span> mpg)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb275-3" title="3"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-126-1.png" width="672" /></p>
</div>
<div id="pie-chart-1" class="section level3">
<h3><span class="header-section-number">7.2.5</span> Pie chart</h3>
<p>In <code>ggplot2</code>, it is not as intuitive as the base function <code>pie()</code> to draw a pie chart. That’s use the same example to see the difference.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" title="1">year &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1998</span><span class="op">:</span><span class="dv">2003</span>) <span class="co"># create variable year</span></a>
<a class="sourceLine" id="cb276-2" title="2">sales &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">500</span>, <span class="dv">600</span>, <span class="dv">650</span>, <span class="dv">700</span>, <span class="dv">400</span>, <span class="dv">550</span>) <span class="co"># create variable sales</span></a>
<a class="sourceLine" id="cb276-3" title="3">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(year, sales) <span class="co"># combine the variables into one data frame called df</span></a>
<a class="sourceLine" id="cb276-4" title="4"></a>
<a class="sourceLine" id="cb276-5" title="5"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">&#39;&#39;</span>, <span class="dt">y =</span> sales, <span class="dt">fill =</span> <span class="kw">factor</span>(year))) <span class="op">+</span></a>
<a class="sourceLine" id="cb276-6" title="6"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width =</span> <span class="dv">1</span>, <span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb276-7" title="7"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&#39;y&#39;</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-127-1.png" width="672" /></p>
<p>What does <code>ggplot2</code> do here to draw a bar plot is to create a bar plot first.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" title="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">&#39;&#39;</span>, <span class="dt">y =</span> sales, <span class="dt">fill =</span> <span class="kw">factor</span>(year))) <span class="op">+</span></a>
<a class="sourceLine" id="cb277-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width =</span> <span class="dv">1</span>, <span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-128-1.png" width="672" /></p>
<p>And then transfer the coordinate system to the polar one.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" title="1"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">&#39;&#39;</span>, <span class="dt">y =</span> sales, <span class="dt">fill =</span> <span class="kw">factor</span>(year))) <span class="op">+</span></a>
<a class="sourceLine" id="cb278-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width =</span> <span class="dv">1</span>, <span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb278-3" title="3"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&#39;y&#39;</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-129-1.png" width="672" /></p>
</div>
</div>
<div id="facets" class="section level2">
<h2><span class="header-section-number">7.3</span> Facets</h2>
<p>If you want to split up your data by one or more variables and plot each subset in one figure, <code>facet</code> is the element you want to use.</p>
<p>In the following example, we draw a scatter plot for each number of forward gears. In each plot, we map <code>mpg</code> to the x axis and <code>wt</code> to y axis. The three plots are alligned in a row.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" title="1"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb279-2" title="2"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb279-3" title="3">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb279-4" title="4"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Geometries</span></a>
<a class="sourceLine" id="cb279-5" title="5"><span class="st">  </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>gear) <span class="co"># Facets, for each number of foward gears</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-130-1.png" width="672" /></p>
<p>If we want to allign the plots in a column.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb280-1" title="1"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb280-2" title="2"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb280-3" title="3">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb280-4" title="4"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Geometries</span></a>
<a class="sourceLine" id="cb280-5" title="5"><span class="st">  </span><span class="kw">facet_grid</span>(gear <span class="op">~</span><span class="st"> </span>.) <span class="co"># Facets, pay attention to the position of gear and the dot sign</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-131-1.png" width="672" /></p>
<p>We could put more variables to split the plots. In the following example, we put one more variable <code>vs</code> in the <code>facet_grid()</code>.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb281-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb281-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Geometries</span></a>
<a class="sourceLine" id="cb281-4" title="4"><span class="st">  </span><span class="kw">facet_grid</span>(vs <span class="op">~</span><span class="st"> </span>gear) <span class="co"># Facets</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-132-1.png" width="672" /></p>
<p>We could use the <code>margins = T</code> to add more plots showing the aggregation of the plots in each column or row.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb282-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb282-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb282-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Geometries</span></a>
<a class="sourceLine" id="cb282-4" title="4"><span class="st">  </span><span class="kw">facet_grid</span>(vs <span class="op">~</span><span class="st"> </span>gear, <span class="dt">margins =</span> T) <span class="co"># Facets</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-133-1.png" width="672" /></p>
<p>We could use <code>labeller=label_both</code> to add more information in the label.</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb283-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb283-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Geometries</span></a>
<a class="sourceLine" id="cb283-4" title="4"><span class="st">  </span><span class="kw">facet_grid</span>(vs <span class="op">~</span><span class="st"> </span>gear, <span class="dt">labeller=</span>label_both) <span class="co"># Facets</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-134-1.png" width="672" /></p>
</div>
<div id="statistics" class="section level2">
<h2><span class="header-section-number">7.4</span> Statistics</h2>
<p>You could fit a line to see the general trend of the scatter plot by adding <code>stat_smooth()</code>.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" title="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars,</a>
<a class="sourceLine" id="cb284-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span></a>
<a class="sourceLine" id="cb284-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb284-4" title="4">p <span class="op">+</span><span class="st">  </span><span class="kw">stat_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="co"># linear line</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb285-1" title="1">p <span class="op">+</span><span class="st"> </span><span class="kw">stat_smooth</span>(<span class="dt">method =</span> <span class="st">&#39;loess&#39;</span>) <span class="co"># non-linear line</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-136-1.png" width="672" /></p>
<p>You could use also use draw a histogram for the dataset.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb286-1" title="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(mpg))</a>
<a class="sourceLine" id="cb286-2" title="2">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">5</span>) <span class="co"># the width of each category is 5</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-137-1.png" width="672" /></p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" title="1">p <span class="op">+</span><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">3</span>) <span class="co"># the number of bins is 3</span></a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-138-1.png" width="672" /></p>
<p>You could fit a denisty line for the histogram.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb288-1" title="1">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>( <span class="dt">y =</span> ..density..), <span class="dt">binwidth =</span> <span class="dv">3</span>, <span class="dt">col =</span> <span class="st">&#39;Black&#39;</span>, <span class="dt">fill =</span> <span class="st">&#39;White&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb288-2" title="2"><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">alpha=</span>.<span class="dv">2</span>, <span class="dt">fill=</span><span class="st">&quot;Gray&quot;</span>) </a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-139-1.png" width="672" /></p>
<p>Another way to show more statistics about your data is boxplot, which we have been introduced before.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb289-1" title="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(gear), <span class="dt">y =</span> mpg))</a>
<a class="sourceLine" id="cb289-2" title="2">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-140-1.png" width="672" /></p>
</div>
<div id="coordinates" class="section level2">
<h2><span class="header-section-number">7.5</span> Coordinates</h2>
<p>While there are many coordinate systems supported by <code>ggplot2</code>, the most commonly used is Cartesian coordinate system, which is the combination of x axis and y axis orthogonally.</p>
<div id="zooming-in-and-out" class="section level3">
<h3><span class="header-section-number">7.5.1</span> Zooming in and out</h3>
<p>In the following example, we zoom in our plot to a spcific area.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb290-1" title="1"><span class="kw">data</span>(mtcars)</a>
<a class="sourceLine" id="cb290-2" title="2">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span></a>
<a class="sourceLine" id="cb290-3" title="3"><span class="st">      </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb290-4" title="4">p <span class="op">+</span><span class="st"> </span><span class="kw">coord_cartesian</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">30</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>))</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-141-1.png" width="672" /></p>
</div>
<div id="ratio" class="section level3">
<h3><span class="header-section-number">7.5.2</span> Ratio</h3>
<p>We could change the ratio of the length of a y unit relative to the length of a x unit (<span class="math inline">\(\frac{\text{y unit}}{\text{x unit}}\)</span>).</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb291-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb291-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb291-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb291-4" title="4"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">ratio =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-142-1.png" width="672" /></p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb292-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb292-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb292-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb292-4" title="4"><span class="st">  </span><span class="kw">coord_fixed</span>(<span class="dt">ratio =</span> <span class="dv">5</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-143-1.png" width="672" /></p>
</div>
<div id="swaping-the-axes" class="section level3">
<h3><span class="header-section-number">7.5.3</span> Swaping the axes</h3>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb293-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb293-2" title="2">       <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb293-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb293-4" title="4"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-144-1.png" width="672" /></p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb294-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">as.factor</span>(am), <span class="dt">y =</span> mpg)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb294-2" title="2"><span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb294-3" title="3"><span class="st">  </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-145-1.png" width="672" /></p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb295-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="co"># Data</span></a>
<a class="sourceLine" id="cb295-2" title="2">       <span class="kw">aes</span>(gear)) <span class="op">+</span><span class="st"> </span><span class="co"># Aesthetics</span></a>
<a class="sourceLine" id="cb295-3" title="3"><span class="st">  </span><span class="kw">geom_bar</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb295-4" title="4"><span class="st">  </span><span class="kw">scale_y_reverse</span>()</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-146-1.png" width="672" /></p>
</div>
<div id="polar-coordinate-system" class="section level3">
<h3><span class="header-section-number">7.5.4</span> Polar coordinate system</h3>
<p>We touched the polar coordinate system a little bit when drawing a pie chart.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb296-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="st">&#39;&#39;</span>, <span class="dt">fill =</span> <span class="kw">factor</span>(gear))) <span class="op">+</span></a>
<a class="sourceLine" id="cb296-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb296-3" title="3"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="dt">theta =</span> <span class="st">&#39;y&#39;</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-147-1.png" width="672" /></p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb297-1" title="1"><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="kw">factor</span>(gear))) <span class="op">+</span></a>
<a class="sourceLine" id="cb297-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width =</span> <span class="dv">1</span>, <span class="dt">col =</span> <span class="st">&#39;Black&#39;</span>, <span class="dt">fill =</span> <span class="st">&#39;Grey&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb297-3" title="3"><span class="st">  </span><span class="kw">coord_polar</span>()</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-148-1.png" width="672" /></p>
</div>
</div>
<div id="themes-updating" class="section level2">
<h2><span class="header-section-number">7.6</span> Themes (Updating)</h2>
<p><code>ggplot2</code> is powerful in its flexibility of themes.</p>
<div id="add-labels" class="section level3">
<h3><span class="header-section-number">7.6.1</span> Add labels</h3>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb298-1" title="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> mpg, <span class="dt">y =</span> wt)) <span class="op">+</span></a>
<a class="sourceLine" id="cb298-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb298-3" title="3">p <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Plot 1&#39;</span>,</a>
<a class="sourceLine" id="cb298-4" title="4">         <span class="dt">x =</span> <span class="st">&#39;Miles/(US) gallon&#39;</span>,</a>
<a class="sourceLine" id="cb298-5" title="5">         <span class="dt">y =</span> <span class="st">&#39;Weight (1000 lbs)&#39;</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-149-1.png" width="672" /></p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb299-1" title="1">p <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&#39;Plot1&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb299-2" title="2"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&#39;Miles/(US) gallon&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb299-3" title="3"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&#39;Weight (1000 lbs)&#39;</span>)</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-150-1.png" width="672" /></p>
</div>
<div id="change-ticks" class="section level3">
<h3><span class="header-section-number">7.6.2</span> Change ticks</h3>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb300-1" title="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mtcars, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(am), <span class="dt">y =</span> mpg))</a>
<a class="sourceLine" id="cb300-2" title="2">p <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb300-3" title="3"><span class="st">    </span><span class="kw">scale_x_discrete</span>(<span class="dt">name =</span> <span class="st">&quot;Transmission&quot;</span>, </a>
<a class="sourceLine" id="cb300-4" title="4">                    <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;Automatic&#39;</span>, <span class="st">&#39;Manual&#39;</span>))</a></code></pre></div>
<p><img src="PA5928-Data-management-and-visualization-with-R_files/figure-html/unnamed-chunk-151-1.png" width="672" /></p>

</div>
</div>
</div>
<h3> References</h3>
<div id="refs" class="references">
<div id="ref-datacamp1">
<p>DataCamp. 2019. “Data Visualization with Ggplot2.” November 3, 2019. <a href="https://www.datacamp.com/courses/data-visualization-with-ggplot2-1">https://www.datacamp.com/courses/data-visualization-with-ggplot2-1</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-visualization-with-base-functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="miscellaneous.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
